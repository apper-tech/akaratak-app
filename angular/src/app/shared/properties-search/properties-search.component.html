<form [formGroup]="form" class="search-wrapper" [ngClass]="'variant-'+variant">
    <div [fxLayout]="(vertical) ? 'column' : 'row wrap'">

        <div fxFlex="100" fxFlex.gt-sm="33.3" fxFlex.sm="50" class="p-2">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Property Type</mat-label>
                <mat-select placeholder="Select Property Type" formControlName="propertyType">
                    <mat-select-filter [array]="propertyTypes" [displayMember]="'name'" class="mat-filter"
                        [placeholder]="'Find By Type..'" (filteredReturn)="filteredTypes = $event">
                    </mat-select-filter>
                    <mat-optgroup *ngFor="let group of filteredTypes" [label]="group.name">
                        <mat-option *ngFor="let type of group.propertyTypes" [value]="type">
                            {{type.name}}
                        </mat-option>
                    </mat-optgroup>
                </mat-select>
            </mat-form-field>
        </div>

        <div fxFlex="100" fxFlex.gt-sm="33.3" fxFlex.sm="50" class="p-2">
            <mat-form-field [appearance]="getAppearance()" [floatLabel]="getFloatLabel()">
                <mat-label>Property Status</mat-label>
                <mat-select placeholder="Select Property Status" formControlName="propertyStatus" multiple>
                    <mat-option *ngFor="let propertyStatus of propertyStatuses" [value]="propertyStatus">
                        {{propertyStatus.name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div fxFlex="100" fxFlex.gt-sm="33.3" fxFlex.sm="50" class="p-2" formGroupName="price">

            <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                <div fxFlex="45">
                    <mat-form-field [appearance]="getAppearance()" [floatLabel]="getFloatLabel()">
                        <mat-label>{{(variant == 1) ? 'Price' : 'Price From'}}</mat-label>
                        <input matInput autocomplete="off" placeholder="From" formControlName="from" type="text"
                            onlyNumber>
                    </mat-form-field>
                </div>
                <div fxFlex="10" class="text-center" [class.pt-2]="variant == 2">
                    <mat-icon class="text-muted">remove</mat-icon>
                </div>
                <div fxFlex="45">
                    <mat-form-field [appearance]="getAppearance()" [floatLabel]="getFloatLabel()">
                        <mat-label>{{(variant == 1) ? '' : 'Price To'}}</mat-label>
                        <input matInput autocomplete="off" placeholder="To" formControlName="to" type="text" onlyNumber>
                    </mat-form-field>
                </div>
            </div>

        </div>

        <div *ngIf="showMore" [fxLayout]="(vertical) ? 'column' : 'row wrap'" class="w-100">
            <div [fxLayout]="(vertical) ? 'column' : 'row wrap'" class="w-100">
                <div fxFlex="100" fxFlex.gt-sm="33.3" fxFlex.sm="50" class="p-2">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-label>Country</mat-label>
                        <mat-select placeholder="Select Country..." formControlName="country"
                            (selectionChange)="onSelectCountry()">
                            <mat-select-filter [array]="countries" [displayMember]="'name'" class="mat-filter"
                                [placeholder]="'Find By Country..'" (filteredReturn)="filteredCountries = $event">
                            </mat-select-filter>
                            <mat-option *ngFor="let country of filteredCountries" [value]="country">
                                {{country.name}} -<i> {{country.nativeName}}</i>
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div *ngIf="form.controls['country'].value" fxFlex="100" fxFlex.gt-sm="33.3" fxFlex.sm="50" class="p-2">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-label>City</mat-label>
                        <mat-select placeholder="Select City..." formControlName="city">
                            <mat-select-filter [array]="cities" [displayMember]="'name'" class="mat-filter"
                                [placeholder]="'Find By City..'" (filteredReturn)="filteredCities = $event">
                            </mat-select-filter>
                            <mat-option *ngFor="let city of filteredCities" [value]="city">
                                {{city.name}}-<i> {{city.nativeName}}</i>
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div fxFlex="100" fxFlex.gt-sm="33.3" fxFlex.sm="50" class="p-2">
                    <mat-form-field [appearance]="getAppearance()" [floatLabel]="getFloatLabel()">
                        <mat-label>Zip Code</mat-label>
                        <input matInput placeholder="exp. 98104" autocomplete="off" formControlName="zipCode">
                    </mat-form-field>
                </div>
                <div fxFlex="100" fxFlex.gt-sm="33.3" fxFlex.sm="50" class="p-2" formGroupName="bedrooms">

                    <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                        <div fxFlex="45">
                            <mat-form-field [appearance]="getAppearance()" [floatLabel]="getFloatLabel()">
                                <mat-label>{{(variant == 1) ? 'Bedrooms' : 'Bedrooms From'}}</mat-label>
                                <mat-select placeholder="From" formControlName="from">
                                    <mat-option *ngFor="let number of [1,2,3,4,5,6,7,8,9,10]" [value]="number">
                                        {{number}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div fxFlex="10" class="text-center" [class.pt-2]="variant == 2">
                            <mat-icon class="text-muted">remove</mat-icon>
                        </div>
                        <div fxFlex="45">
                            <mat-form-field [appearance]="getAppearance()" [floatLabel]="getFloatLabel()">
                                <mat-label>{{(variant == 1) ? '' : 'Bedrooms To'}}</mat-label>
                                <mat-select placeholder="To" formControlName="to">
                                    <mat-option *ngFor="let number of [1,2,3,4,5,6,7,8,9,10]" [value]="number">
                                        {{number}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>

                </div>

                <div fxFlex="100" fxFlex.gt-sm="33.3" fxFlex.sm="50" class="p-2" formGroupName="bathrooms">

                    <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                        <div fxFlex="45">
                            <mat-form-field [appearance]="getAppearance()" [floatLabel]="getFloatLabel()">
                                <mat-label>{{(variant == 1) ? 'Bathrooms' : 'Bathrooms From'}}</mat-label>
                                <mat-select placeholder="From" formControlName="from">
                                    <mat-option *ngFor="let number of [1,2,3,4,5,6,7,8,9,10]" [value]="number">
                                        {{number}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div fxFlex="10" class="text-center" [class.pt-2]="variant == 2">
                            <mat-icon class="text-muted">remove</mat-icon>
                        </div>
                        <div fxFlex="45">
                            <mat-form-field [appearance]="getAppearance()" [floatLabel]="getFloatLabel()">
                                <mat-label>{{(variant == 1) ? '' : 'Bathrooms To'}}</mat-label>
                                <mat-select placeholder="To" formControlName="to">
                                    <mat-option *ngFor="let number of [1,2,3,4,5,6,7,8,9,10]" [value]="number">
                                        {{number}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>

                </div>

                <div fxFlex="100" fxFlex.gt-sm="33.3" fxFlex.sm="50" class="p-2" formGroupName="garages">

                    <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                        <div fxFlex="45">
                            <mat-form-field [appearance]="getAppearance()" [floatLabel]="getFloatLabel()">
                                <mat-label>{{(variant == 1) ? 'Garages' : 'Garages From'}}</mat-label>
                                <mat-select placeholder="From" formControlName="from">
                                    <mat-option *ngFor="let number of [1,2,3,4,5,6,7,8,9,10]" [value]="number">
                                        {{number}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div fxFlex="10" class="text-center" [class.pt-2]="variant == 2">
                            <mat-icon class="text-muted">remove</mat-icon>
                        </div>
                        <div fxFlex="45">
                            <mat-form-field [appearance]="getAppearance()" [floatLabel]="getFloatLabel()">
                                <mat-label>{{(variant == 1) ? '' : 'Garages To'}}</mat-label>
                                <mat-select placeholder="To" formControlName="to">
                                    <mat-option *ngFor="let number of [1,2,3,4,5,6,7,8,9,10]" [value]="number">
                                        {{number}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>

                </div>

                <div fxFlex="100" fxFlex.gt-sm="33.3" fxFlex.sm="50" class="p-2" formGroupName="area">

                    <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                        <div fxFlex="45">
                            <mat-form-field [appearance]="getAppearance()" [floatLabel]="getFloatLabel()">
                                <mat-label>{{(variant == 1) ? 'Area' : 'Area From'}}</mat-label>
                                <input matInput autocomplete="off" placeholder="From" formControlName="from" type="text"
                                    onlyNumber>
                            </mat-form-field>
                        </div>
                        <div fxFlex="10" class="text-center" [class.pt-2]="variant == 2">
                            <mat-icon class="text-muted">remove</mat-icon>
                        </div>
                        <div fxFlex="45">
                            <mat-form-field [appearance]="getAppearance()" [floatLabel]="getFloatLabel()">
                                <mat-label>{{(variant == 1) ? '' : 'Area To'}}</mat-label>
                                <input matInput autocomplete="off" placeholder="To" formControlName="to" type="text"
                                    onlyNumber>
                            </mat-form-field>
                        </div>
                    </div>

                </div>

                <div fxFlex="100" fxFlex.gt-sm="33.3" fxFlex.sm="50" class="p-2" formGroupName="propertyAge">

                    <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                        <div fxFlex="45">
                            <mat-form-field [appearance]="getAppearance()" [floatLabel]="getFloatLabel()">
                                <mat-label>{{(variant == 1) ? 'Property Age' : 'Fear Built From'}}</mat-label>
                                <input matInput autocomplete="off" placeholder="From" formControlName="from" type="text"
                                    onlyNumber maxlength="4">
                            </mat-form-field>
                        </div>
                        <div fxFlex="10" class="text-center" [class.pt-2]="variant == 2">
                            <mat-icon class="text-muted">remove</mat-icon>
                        </div>
                        <div fxFlex="45">
                            <mat-form-field [appearance]="getAppearance()" [floatLabel]="getFloatLabel()">
                                <mat-label>{{(variant == 1) ? '' : 'Property Age To'}}</mat-label>
                                <input matInput autocomplete="off" placeholder="To" formControlName="to" type="text"
                                    onlyNumber maxlength="4">
                            </mat-form-field>
                        </div>
                    </div>

                </div>

                <div fxFlex="100" class="mb-2">
                    <p class="uppercase m-2 fw-500">Features</p>
                    <div formArrayName="features" [fxLayout]="(vertical) ? 'column' : 'row wrap'">
                        <div [formGroupName]="i"
                            *ngFor="let control of form['controls'].features['controls']; index as i" class="p-2">
                            <mat-checkbox formControlName="selected">{{features[i].name}}</mat-checkbox>
                        </div>
                    </div>
                </div>

            </div>


        </div>


        <div fxLayout="row" fxLayoutAlign="center center" class="p-2">
            <button mat-raised-button color="warn" class="uppercase mx-1" (click)="reset()">Clear</button>
            <button *ngIf="!vertical" mat-raised-button color="primary" class="uppercase mx-1"
                (click)="showMore = !showMore">{{(showMore) ? 'Hide' : 'Advanced'}}</button>
            <button *ngIf="searchOnBtnClick" mat-raised-button color="primary" class="search-btn mx-1"
                (click)="search()">
                <mat-icon>search</mat-icon> Search
            </button>
        </div>

    </div>
</form>